 --- BIN FILE READ: NICA_Gold
  10913 INCLUDE 'NICA_Gold';
  10914   PROCEDURE MCMCALC ALPHA0 ALPHA1;
  10915     VARIABLE TMPALPHA 100;
  10916     VARIABLE I 1;
  10917     VARIABLE MCM0 1;
  10918     VARIABLE MCM1 1;
  10919     VARIABLE MCM2 1;
  10920     VARIABLE MCM3 1;
  10921     VARIABLE MCM4 1;
  10922     MCM MAP SPOS TMPALPHA; %MCM: 3587
  10923     MCM0 := -TMPALPHA|(0&0&0&0&0&0);
  10924     MCM1 := -TMPALPHA|(0&0&0&0&0&1);
  10925     MCM2 := -2*TMPALPHA|(0&0&0&0&0&2);
  10926     MCM3 := -2*3*TMPALPHA|(0&0&0&0&0&3);
  10927     MCM4 := -2*3*4*TMPALPHA|(0&0&0&0&0&4);
  10928     ALPHA0:= MCM1;
  10929     ALPHA1:= MCM2;
  10930     WRITE 6 '++++++++ MOMENTUM COMPACTION FACTOR ++++++++';
  10931     WRITE 6 'MC0 = '&ST(MCM0);
  10932     WRITE 6 'MC1 = '&ST(MCM1);
  10933     WRITE 6 'MC2 = '&ST(MCM2);
  10934     WRITE 6 'MC3 = '&ST(MCM3);
  10935     WRITE 6 'MC4 = '&ST(MCM4);
  10936     WRITE 6 '++++++++++++++++++++++++++++++++++++++++++++';
  10937     ENDPROCEDURE;
  10938   PROCEDURE INJECT NUM PSI_DEG;
  10939     VARIABLE X 100;
  10940     VARIABLE I 1;
  10941     VARIABLE PSI 1;
  10942     VARIABLE SY 1;
  10943     VARIABLE SZ 1;
  10944     PSI := DEG2RAD(PSI_DEG); %DEG2RAD: 9856
  10945     X := LINSPACE(-3E-3, 3E-3, NUM); %LINSPACE: 9840
  10946     SY := SIN(PSI);
  10947     SZ := COS(PSI);
  10948     CR; %CR:  947
  10949     SR 0 0 0 0 0 0 0 0 1; %SR: 2082
  10950     SSR 0 SY SZ; %SSR: 2197
  10951     LOOP I 1 NUM;
  10952       SR X|I 0 0 0 0 0 0 0 1; %SR: 2082
  10953       SSR 0 SY SZ; %SSR: 2197
  10954       SR 0 0 X|I 0 0 0 0 0 1; %SR: 2082
  10955       SSR 0 SY SZ; %SSR: 2197
  10956       SR 0 0 0 0 0 (X|I)/10 0 0 1; %SR: 2082
  10957       SSR 0 SY SZ; %SSR: 2197
  10958       ENDLOOP;
  10959     ENDPROCEDURE;
  10960   PROCEDURE MAIN;
  10961     VARIABLE WHERE 500;
  10962     VARIABLE MRKR 200;
  10963     VARIABLE DGAMMA 1;
  10964     VARIABLE NFREE 1;
  10965     VARIABLE FTR 1;
  10966     VARIABLE CASE 1;
  10967     VARIABLE PCT 1;
  10968     VARIABLE I 1;
  10969     VARIABLE NTURN 1;
  10970     VARIABLE U 1;
  10971     VARIABLE M_P 1;
  10972     VARIABLE GAMMA 1;
  10973     VARIABLE BETA 1;
  10974     VARIABLE NTOT 1;
  10975     VARIABLE DQ_MAX 1;
  10976     VARIABLE DQ_MIN 1;
  10977     VARIABLE DELTAQ 1;
  10978     VARIABLE SCALE 1;
  10979     VARIABLE NSWITCH 1;
  10980     VARIABLE ALPHA0 1;
  10981     VARIABLE ALPHA1 1;
  10982     VARIABLE ETA0 1;
  10983     VARIABLE ETA1 1;
  10984     VARIABLE SGX 1;
  10985     VARIABLE SGY 1;
  10986     VARIABLE PNUM 1;
  10987     VARIABLE PSI0_DEG 1;
  10988     VARIABLE RAYH 10000 8;
  10989     VARIABLE SPIH 10000 3;
  10990     VARIABLE MUARR 100 4;
  10991     PROCEDURE PUSH NTURN;
  10992       WRITE 6 'at PUSH' NTURN;
  10993       U := 300;
  10994       M_P := 0.938E9;
  10995       DGAMMA := (U/M_P);
  10996       GAMMA := 7.08562;
  10997       BETA := SQRT(1-1/(GAMMA*GAMMA));
  10998       NTOT := 6225;
  10999       DQ_MAX := 0.005616;
  11000       DQ_MIN := -0.00337;
  11001       SGX := 0.3599718607904814E-001;
  11002       SGY := -.8627374333752474E-001;
  11003       SET_FOR_PROTONS (GAMMA+(DGAMMA*NTURN)); %SET_FOR_PROTONS:10543
  11004       DELTAQ := DQ_MAX - ((DQ_MAX - DQ_MIN) / NTOT * NTURN);
  11005       WRITE 6 'dQ' DELTAQ;
  11006       LATTICE SGX SGY 0 DELTAQ; %LATTICE:10580
  11007       WRITE 6 'END of LATTICE';
  11008       MCMCALC ALPHA0 ALPHA1; %MCMCALC:10914
  11009       WRITE 6 'ALPHA0 = '&ST(ALPHA0);
  11010       WRITE 6 'ALPHA1 = '&ST(ALPHA1);
  11011       GAMMA := (GAMMA+(DGAMMA*NTURN));
  11012       BETA := SQRT(1-1/(GAMMA*GAMMA));
  11013       ETA0 := ALPHA0 - 1/(GAMMA*GAMMA);
  11014       ETA1 := ALPHA1+(3/2)*(BETA*BETA)/(GAMMA*GAMMA)-6;
  11015       WRITE 6 'ETA1 = '&ST(ETA1);
  11016       LRAY RAYH; %LRAY: 2448
  11017       LSPI SPIH; %LSPI: 2630
  11018       WRITE 6 'LOAD of PARTICLES';
  11019       TR 1 1 -1 -3 1.1 1.1 0 0 -12; %TR: 4756
  11020       WRITE 6 'TRACKING END';
  11021       SRAY RAYH; %SRAY: 2442
  11022       WRITE 6 'SAVE ORBITAL';
  11023       SSPI SPIH; %SSPI: 2624
  11024       WRITE 6 'END of PUSH';
  11025       WRITE 772 ST(NTURN)&' '&ST((GAMMA+(DGAMMA*NTURN)))&' '&ST(DELTAQ
                  )&' '&ST(ALPHA0)&' '&ST(ALPHA1)&' '&ST(ETA0)&' '&ST(ETA1);
  11026       ENDPROCEDURE;
  11027     PNUM := 10;
  11028     NSWITCH := 6225;
  11029     PSI0_DEG := 45;
  11030     MRKR := 'JUMP_SEX';
  11031     NFREE := 1;
  11032     INJECT PNUM PSI0_DEG; %INJECT:10938
  11033     SRAY RAYH; %SRAY: 2442
  11034     SSPI SPIH; %SSPI: 2624
  11035     WRITE 6 '^^^^ INITIAL SPIN PSI'&SF(PSI0_DEG,'(F15.7)'); %SF:  285
  11036     OPENF 100501 'dat/TR/'&MRKR&'/TRPSPI_'&MRKR&'.dat' 'REPLACE';
  11037     WRITE 100501 '# number of rays:   '&SI(PNUM*3+2); %SI:  288
  11038     WRITE 100501 '# TURN PID S_X S_Y S_Z';
  11039     WRITETBL 100501 SPI 3 SF(0, '(I15)'); %WRITETBL: 9798 %SF:  285
  11040     OPENF 100502 'dat/TR/'&MRKR&'/TRPRAY_'&MRKR&'.dat' 'REPLACE';
  11041     WRITE 100502 '# number of rays:   '&SI(PNUM*3+2); %SI:  288
  11042     WRITE 100502 '# TURN PID X A Y B T D';
  11043     WRITETBL 100502 RAY 6 SF(0, '(I15)'); %WRITETBL: 9798 %SF:  285
  11044     OPENF 100503 'dat/TR/'&MRKR&'/TRMUARR_'&MRKR&'.dat' 'REPLACE';
  11045     WRITE 100503 '# number of rays:   '&SI(PNUM*3+2); %SI:  288
  11046     WRITE 100503 '# TURN PID NU NX NY NZ';
  11047     OPENF 772 'dat/TR/'&MRKR&'/LATTICE.dat' 'REPLACE';
  11048     WRITE 772 'TURN GAMMA DELTAQ ALPHA0 ALPHA1 ETA0 ETA1';
  11049     SCALE := 100;
  11050     WRITE 6 SCALE NSWITCH;
  11051     LOOP CASE 1 NSWITCH;
  11052       WRITE 6 'CASE '&SF(CASE, '(I10)'); %SF:  285
  11053       PUSH CASE; %PUSH:10991
  11054       WRITE 6 'PUSH ACCURES';
  11055       IF MOD(CASE, SCALE)=0; %MOD:  210
  11056         WRITETBL 100501 SPI   3 SF(CASE, '(I15)'); %WRITETBL: 9798 %SF
                  :  285
  11057         WRITETBL 100502 RAY   6 SF(CASE, '(I15)'); %WRITETBL: 9798 %SF
                  :  285
  11058         ENDIF;
  11059       ENDLOOP;
  11060     WRITE 6 'FREE POST-FLIP TRACKING';
  11061     FTR := 1;
  11062     LRAY RAYH; %LRAY: 2448
  11063     LSPI SPIH; %LSPI: 2630
  11064     TR FTR FTR -1 -3 1.1 1.1 0 0 -12; %TR: 4756
  11065     WRITETBL 100501 SPI   3 SF(NSWITCH+FTR, '(I15)'); %WRITETBL: 9798 
                  %SF:  285
  11066     WRITETBL 100502 RAY   6 SF(NSWITCH+FTR, '(I15)'); %WRITETBL: 9798 
                  %SF:  285
  11067     ENDPROCEDURE;
  11068   PROCEDURE RUN;
  11069     VARIABLE DATDIR 500;
  11070     VARIABLE SGX 1;
  11071     VARIABLE SGY 1;
  11072     VARIABLE LATPARS 1 2;
  11073     SGX := 0.0;
  11074     SGY :=  0.0;
  11075     GROUTF 'img/dump/TR' 1;
  11076     OV 3 3 0; %OV:  969
  11077     TRR 1; %TRR: 5317
  11078     DAEPS 1E-12;
  11079     MAIN; %MAIN:10960
  11080     ENDPROCEDURE;
  11081   RUN; %RUN:11068
